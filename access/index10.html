<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <title>Tabel Elevi</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f6f8;
            margin: 40px;
        }

        h1 {
            text-align: center;
            color: #2c3e50;
        }

        table {
            width: 90%;
            margin: 0 auto;
            border-collapse: collapse;
            background-color: #fff;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }

        th, td {
            padding: 12px 16px;
            text-align: center;
            border: 1px solid #ddd;
        }

        th {
            background-color: #2980b9;
            color: white;
        }

        tr:nth-child(even) {
            background-color: #f2f2f2;
        }

        tr:hover {
            background-color: #dfefff;
        }

        .corigent {
            background-color: #ffcccc;
        }
    </style>
</head>
<body>

    <h1>Creați o bază de date numită Liceu. <br>
        Apoi creați următorul tabel numit Elevi:</h1>

    <table>
        <thead>
            <tr>
                <th>ID_elev</th>
                <th>Nume</th>
                <th>Clasa</th>
                <th>Varsta</th>
                <th>Nr_absente</th>
                <th>Media_generala</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>1</td>
                <td>Andrei Popescu</td>
                <td>a IX-a</td>
                <td>15</td>
                <td>3</td>
                <td>9.45</td>
            </tr>
            <tr>
                <td>2</td>
                <td>Maria Ionescu</td>
                <td>a XII-a</td>
                <td>18</td>
                <td>0</td>
                <td>9.80</td>
            </tr>
            <tr>
                <td>3</td>
                <td>Luca Stan</td>
                <td>a X-a</td>
                <td>16</td>
                <td>5</td>
                <td>8.75</td>
            </tr>
            <tr>
                <td>4</td>
                <td>Elena Dobre</td>
                <td>a IX-a</td>
                <td>15</td>
                <td>2</td>
                <td>9.20</td>
            </tr>
            <tr>
                <td>5</td>
                <td>Raul Gheorghe</td>
                <td>a XI-a</td>
                <td>17</td>
                <td>7</td>
                <td>8.50</td>
            </tr>
            <tr class="corigent">
                <td>6</td>
                <td>Bogdan Radu</td>
                <td>a X-a</td>
                <td>16</td>
                <td>12</td>
                <td>4.80</td>
            </tr>
            <tr class="corigent">
                <td>7</td>
                <td>Cristina Marin</td>
                <td>a IX-a</td>
                <td>15</td>
                <td>9</td>
                <td>4.50</td>
            </tr>
            <tr class="corigent">
                <td>8</td>
                <td>Florin Nistor</td>
                <td>a XII-a</td>
                <td>18</td>
                <td>14</td>
                <td>3.90</td>
            </tr>
            <tr class="corigent">
                <td>9</td>
                <td>Georgiana Toma</td>
                <td>a XI-a</td>
                <td>17</td>
                <td>6</td>
                <td>4.70</td>
            </tr>
            <tr class="corigent">
                <td>10</td>
                <td>Ionescu Vladut</td>
                <td>a X-a</td>
                <td>16</td>
                <td>10</td>
                <td>3.40</td>
            </tr>
        </tbody>
    </table>
    
    <ol>Creați următoarele interogări:
        <li>Afișează toți elevii ordonați alfabetic după nume:</li>
        <li>Selectează elevii cu media sub 5 (corigenți):</li>
        <li>Numărul total de elevi:</li>
        <li>Media generală a tuturor elevilor:</li>
        <li>Elevii cu cele mai multe absențe (top 3):</li>
        <li>Elevii din clasa a X-a:</li>
        <li>Numărul de corigenți pe clasă:</li>
        <li>Afișează elevii fără absențe:</li>
        <li>Cel mai bun elev (media maximă):</li>
        <li>Numărul de elevi pe fiecare clasă:</li>
    </ol>
    <h2>COUNT în SQL</h2> 
    <p>Descriere:<br>
COUNT este o funcție agregată folosită pentru a număra rândurile dintr-un set de rezultate.</p>
    <p>Funcționalitate:<br>
Returnează numărul de rânduri care îndeplinesc o condiție specificată.<br>
Poate număra toate rândurile sau doar rândurile în care o coloană nu este NULL.</p>
    <p>Sintaxă generală:<br>
    COUNT(*)          -- Numără toate rândurile (inclusiv cele cu valori NULL)<br>
    COUNT(nume_coloana) -- Numără rândurile unde coloana specificată NU este NULL<br>
    COUNT(DISTINCT nume_coloana) -- Numără valorile distincte, fără duplicate și fără NULL-uri
    </p>
    <h2>ORDER BY în SQL</h2>
    <p>Descriere:<br>
    ORDER BY este o clauză SQL folosită pentru a sorta rezultatele unui SELECT în ordine crescătoare (ASC)<br>
        sau descrescătoare (DESC), pe baza uneia sau mai multor coloane.</p>
    <p>Sintaxă generală:<br>
    SELECT column1, column2 FROM table_name ORDER BY column1 [ASC|DESC], column2 [ASC|DESC];
    </p>
    <p>Exemple:<br>
    -- Sortează după nume în ordine alfabetică (implicit ASC)<br>
SELECT * FROM Employees ORDER BY LastName;<br>

-- Sortează după salariu descrescător<br>
SELECT * FROM Employees ORDER BY Salary DESC;<br>

-- Sortează după departament (ASC), apoi salariu (DESC)<br>
SELECT * FROM Employees ORDER BY Department ASC, Salary DESC;
</p>
    <h2>Clauza  TOP în SQL Server</h2>
    <p>Clauza TOP este folosită pentru a limita câte rânduri returnează o interogare. E utilă mai ales când vrei doar primele câteva rezultate.</p>
    <p>Exemplu:<br>
        SELECT TOP 5 * FROM Angajati ORDER BY Salariu DESC;
    </p>
    <p>Ce face această interogare:<br>
       Selectează primele 5 rânduri din tabelul Angajati in ordinea descrescătoare a salariului.</p>
    <h2>GROUP BY în SQL Server</h2>
    <p>Clauza GROUP BY permite să grupezi rânduri care au valori comune în una sau mai multe coloane,<br>
        pentru a aplica funcții agregate (sume, medii, număr, etc.) pe fiecare grup în parte.</p>
    <p><ul>Practic:
  <li>Se face mai întâi filtrarea (prin <code>WHERE</code>)</li>
  <li>apoi se grupează rândurile pe baza coloanelor specificate</li>
  <li>apoi se aplică funcțiile agregate (ex. <code>SUM</code>, <code>COUNT</code>, <code>AVG</code>) pe fiecare grup</li>
  <li>Poți folosi <code>HAVING</code> pentru a filtra rezultatele după ce s-au grupat</li>
</ul>
    <ul> Reguli importante:
  <li>Toate coloanele care apar în <code>SELECT</code> și nu sunt într-o funcție agregată trebuie să fie incluse în <code>GROUP BY</code>.</li>
  <li>Coloanele din <code>GROUP BY</code> pot fi mai multe (ex. <code>GROUP BY col1, col2</code>).</li>
  <li><code>GROUP BY</code> vine după <code>WHERE</code>, dar înainte de <code>HAVING</code> și <code>ORDER BY</code>.</li>
</ul>
</p>
    <p>Sintaxă generală:<br>
    SELECT coloana1, coloana2, FUNC_AGR(coloana3) AS Alias<br>
FROM NumeTabel<br>
WHERE &lt;condiție opțională&gt;<br>
GROUP BY coloana1, coloana2<br>
HAVING &lt;condiție pe grupuri&gt;   -- opțional<br>
ORDER BY coloana1, Alias        -- opțional<br>
    <ul>
        <li>FUNC_AGR poate fi SUM(), COUNT(), AVG(), MIN(), MAX(), etc.</li>
        <li>HAVING se folosește pentru a filtra după ce s-au creat grupurile (ex. afișează doar grupurile care au SUM > 1000)</li>
    </ul>
</p>
    <p>Exemplul 1 — total pe categorie<br>
Avem un tabel Produse cu coloanele: Categorie, Pret.<br>
Vrem să vedem suma prețurilor pe fiecare categorie:<br>
    SELECT Categorie, SUM(Pret) AS TotalPret FROM Produse GROUP BY Categorie;
</p>
    <p>Exemplul 2 — număr pe grup + filtrare cu HAVING<br>
Tabel Comenzi, coloane: ClientID, ValoareComanda.<br>
Vrem să aflăm câți clienți au făcut comenzi și doar pe cei care au peste 3 comenzi:<br>
SELECT ClientID, COUNT(*) AS NumarComenzi FROM Comenzi GROUP BY ClientID HAVING COUNT(*) > 3;<br>
<ul>Aici:
<li>COUNT(*) numără comenzile per client,</li>
<li>HAVING filtrează doar acei clienți cu NumarComenzi > 3.</li>
</ul>
    </p>
    <p>Exemplul 3 — grupare pe mai multe coloane<br>
Tabel Vanzari cu coloanele: Regiune, An, SumaVanzare.<br>
Vrem totalul vânzărilor pentru fiecare regiune în fiecare an:<br>
    SELECT Regiune, An, SUM(SumaVanzare) AS TotalVanzari FROM Vanzari GROUP BY Regiune, An;
</p>
</body>
</html>
